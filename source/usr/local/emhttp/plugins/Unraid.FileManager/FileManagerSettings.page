Menu="FileManager:2"
Title="FileManager Settings"
Tag="gear"
---
<?PHP
/* Copyright 2019, Dave Walker (itimpi).
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License version 2,
 * as published by the Free Software Foundation.
 *
 * Limetech is given expliit permission to use this code in any way they like.
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 */

require_once '/usr/local/emhttp/plugins/Unraid.FileManager/fileManagerHelpers.php';
?>
<script>

function contactServer(op,msg) {
    var filedata = new Object;
    filedata = ((op == 'save') ? $("#settingsArea").val() : '');
    $.ajax({
    type: "POST",
    url: "<?=$filePhp?>",
    data: {action:op, filedata:filedata},
    success: function(data) {
                if (data) {
                        resetSettingsForm();
                        $("#settingsArea").val(data);
                        swal({title: msg,
                              text: "",
                              icon:"success"});
                    }
                },
    dataType: "text"
    });
}

function madeEdit() {
    $("#btnDone").prop("disabled",true);
    $("#btnDefaults,#btnReset, #btnApply").prop("disabled",false);
    $("#btnReset").css("display", "inline");
    $("#btnDone").css("display","none");
}

function undoEdit() {
    contactServer('undo', 'Reverted to last Saved Settings');
}

function loadDefaults() {
    contactServer('defaults', 'Settings reset to defaults');
    $("#btnApply").prop("disabled",false);
}

function saveSettings() {
    contactServer('save', 'New settings saved');
}

function resetSettingsForm() {
    $("#btnDone, btnDefaults").prop("disabled",false);
    $("#btnReset, #btnApply").prop("disabled",true);
    $("#btnReset").css("display", "none");
    $("#btnDone").css("display","inline");
}


</script>

FileManager is a browser based File manager developed by <a href="http://www.gerd-tentler.de/tools/filemanager/">Gerd Tentler</a>.  It is highly configurable which has made it possible to integrate it into the Unraid GUI. The section below shows the full configuration file that is currently in use. The default settings issued with the plugin have been chosen to be appropriate for standard Unraid use but at the moment they are still being tuned for optimal values.
<p>You can edit the entries below to try out the effects of different settings but take great care as the syntax is not checked and getting it wrong can stop the FileManager tab from displaying a list of files.</p>

<input  type="button" id="btnDefaults" value="Defaults" onclick="loadDefaults()">
: <input type="button"  id="btnApply" value="Apply" onclick="saveSettings()" disabled>
<input type="button" id="btnReset" value="Reset" onclick="undoEdit()", style="display:none">
<input type="button" id="btnDone" value="Done" onclick="done()">
<a style='float:right' href='https://www.paypal.com/cgi-bin/webscr?cmd=xclick&amp;business=info@gerd-tentler.de&amp;item_name=FileManager&amp;no_shipping=1&amp;no_note=1&amp;&currency_code=EUR&amp;lc=US&amp;bn=PP-BugNowBF' target='_blank'><img src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif"></a>
       
> Click the **Defaults** button to initialize the edit box with the default contents
> suppled with the plugin.  You still need to click **Apply** in order to commit any
> changes.
>
> Click the **Apply** button to commit the current edits.  Click **Reset** to
> undo any changes you make (before saving). Click **Done** to exit this page.

<div markdown="0" class="advanced" style="box-sizing: border-box;">
<center>
<textarea   class = "raw"
            id="settingsArea"
            name="raw" 
            spellcheck="false" 
            cols="80" 
            oninput="madeEdit()"
            rows="<?=substr_count($current,"\n")+1?>" 
            style="box-sizing:border-box;marge:0 auto;border-style:solid;border-width:3;padding:25;font-family:Courier;width:1200px">
<?=$current?>
</textarea>
</center>
</div>
